(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"0d7a":function(t,e,r){"use strict";var a=r("b2a2"),o=r("8a1c"),l=r("857c"),i=r("2732"),n=r("ef4c"),s=r("38eb"),u=r("d88d"),c=r("59da"),d=r("5139"),m=r("efe2"),p=[].push,f=Math.min,b=4294967295,h=!m((function(){return!RegExp(b,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(i(this)),l=void 0===r?b:r>>>0;if(0===l)return[];if(void 0===t)return[a];if(!o(t))return e.call(a,t,l);var n,s,u,c=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=new RegExp(t.source,m+"g");while(n=d.call(h,a)){if(s=h.lastIndex,s>f&&(c.push(a.slice(f,n.index)),n.length>1&&n.index<a.length&&p.apply(c,n.slice(1)),u=n[0].length,f=s,c.length>=l))break;h.lastIndex===n.index&&h.lastIndex++}return f===a.length?!u&&h.test("")||c.push(""):c.push(a.slice(f)),c.length>l?c.slice(0,l):c}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=i(this),l=void 0==e?void 0:e[t];return void 0!==l?l.call(e,o,r):a.call(String(o),e,r)},function(t,o){var i=r(a,t,this,o,a!==e);if(i.done)return i.value;var d=l(t),m=String(this),p=n(d,RegExp),g=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),v=new p(h?d:"^(?:"+d.source+")",y),F=void 0===o?b:o>>>0;if(0===F)return[];if(0===m.length)return null===c(v,m)?[m]:[];var _=0,w=0,k=[];while(w<m.length){v.lastIndex=h?w:0;var q,$=c(v,h?m:m.slice(w));if(null===$||(q=f(u(v.lastIndex+(h?0:w)),m.length))===_)w=s(m,w,g);else{if(k.push(m.slice(_,w)),k.length===F)return k;for(var C=1;C<=$.length-1;C++)if(k.push($[C]),k.length===F)return k;w=_=q}}return k.push(m.slice(_)),k}]}),!h)},"171b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("角色管理")])],1)],1),r("el-card",[r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),t.add(e)}}},[t._v("新增")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"rownum_",label:"编号",width:"100"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.edit(e.row)}}},[t._v("修改")]),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1),r("el-dialog",{attrs:{title:1===t.type?"新增角色":"修改角色",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:t.ruleForm.roleName,callback:function(e){t.$set(t.ruleForm,"roleName",e)},expression:"ruleForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:t.ruleForm.roleDesc,callback:function(e){t.$set(t.ruleForm,"roleDesc",e)},expression:"ruleForm.roleDesc"}})],1),r("el-form-item",{staticClass:"right",attrs:{label:"角色权限",prop:"roleRight"}},[r("el-tree",{ref:"tree",attrs:{data:t.rightList,"show-checkbox":"","node-key":"id","default-checked-keys":t.checkList,props:t.defaultProps,"default-expand-all":"","check-on-click-node":""},on:{check:t.checkChange}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)],1)},o=[],l=(r("b4fb"),r("3466"),r("ecb4"),r("9302"),r("2eeb"),r("77ad"),r("ea69"),r("e35a"),r("5e9f"),r("0d7a"),r("2971")),i={data:function(){return{queryForm:{keywords:"",searchType:"0",page:1,size:10,total:""},tableData:[],dialogVisible:!1,ruleForm:{roleName:"",roleDesc:""},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},rightList:[],defaultProps:{children:"childNode",label:"name"},checkList:[],checkListStr:"",roleId:"",type:1}},methods:{checkChange:function(t,e){this.checkList=e.checkedKeys,this.checkListStr=this.roleJoin(e.checkedKeys)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var r={roleAct:e.checkListStr||e.ruleForm.roleAct,roleDesc:e.ruleForm.roleDesc,roleName:e.ruleForm.roleName};1===e.type?e.httpPost("/role/add",r).then((function(t){e.$message.success("保存成功"),e.loadData()})).catch((function(t){})):e.httpPost("/role/mod/"+e.roleId,r).then((function(t){e.$message.success("保存成功"),e.loadData()})),e.dialogVisible=!1}))},add:function(){var t=this;this.type=1,this.dialogVisible=!0,this.$nextTick((function(){t.$refs.tree.setCheckedKeys([]),t.$refs.ruleForm.resetFields()}))},edit:function(t){var e=this;this.type=2,this.roleId=t.id,this.dialogVisible=!0,this.$nextTick((function(){e.$refs.tree.setCheckedKeys(e.roleMat(t.roleAct)),e.ruleForm=Object.assign({},t)}))},del:function(t){var e=this;this.$confirm("此操作将删除数据, 是否继续?","提示",{type:"warning"}).then((function(){e.httpPost("/role/rem",[t]).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.loadData()}))})).catch((function(){}))},loadData:function(){var t=this;this.queryForm.total="",this.httpGet("/role/query",{}).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total}))},roleJoin:function(t){var e=t,r=[],a=[];t.map((function(t){t.length>1&&(a.push(t.slice(0,1)),r.push(t.slice(0,1)+"_"+t))})),a=this.quChongfn(a);e=r.concat(a).join(",");return e=e.replace(/,/g,"|"),e},roleMat:function(t){var e=Object.assign([],this.menuArr);e.splice(0,1);var r=t.split("|"),a=[],o=[],l=[];return r.map((function(t){-1===t.indexOf("_")?(a.push(t),o.push({a:t,children:[]})):(o.map((function(e){e.a==t.split("_")[0]&&e.children.push(t.split("_")[1])})),a.push(t.split("_")[1]))})),o.map((function(t,r){e.map((function(e,r){t.children.length<e.childNode.length&&l.push(t.a)}))})),l=this.quChongfn(l),l.map((function(t,e){var r=a.findIndex((function(e){return e==t}));a.splice(r,1)})),this.checkList=a,a},quChongfn:function(t){for(var e=[],r=0;r<t.length;r++){var a=t[r];-1==e.indexOf(a)&&e.push(a)}return e}},mounted:function(){this.loadData();var t=Object.assign([],l["a"]);this.menuArr=Object.assign([],l["a"]),t.splice(0,1),this.rightList=t}},n=i,s=(r("89bb"),r("9ca4")),u=Object(s["a"])(n,a,o,!1,null,"786253f7",null);e["default"]=u.exports},"26b5":function(t,e,r){"use strict";var a=r("4f58"),o=r.n(a);o.a},"289d":function(t,e,r){"use strict";var a=r("3842"),o=r.n(a);o.a},"2eeb":function(t,e,r){"use strict";var a=r("1c8b"),o=r("5dfd").map,l=r("1ea7"),i=r("ff9c"),n=l("map"),s=i("map");a({target:"Array",proto:!0,forced:!n||!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},3466:function(t,e,r){"use strict";var a=r("1c8b"),o=r("5dfd").findIndex,l=r("258f"),i=r("ff9c"),n="findIndex",s=!0,u=i(n);n in[]&&Array(1)[n]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!u},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l(n)},"35db":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"1"===t.type?"/organization":"/customUser"}}},[t._v(t._s("1"===t.type?"组织机构管理":"定制用户管理"))]),r("el-breadcrumb-item",[t._v("子用户管理")])],1)],1),r("el-card",[r("div",{staticClass:"MT_table_cont"},["2"===t.type?r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),t.add(e)}}},[t._v("新建")])],1):t._e(),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"account",label:"登录名",width:"200"}}),r("el-table-column",{attrs:{prop:"extName",label:"姓名",width:"200"}}),r("el-table-column",{attrs:{prop:"department",label:"机构名称"}}),r("el-table-column",{attrs:{prop:"deptType",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.flag?r("el-tag",[t._v("启用")]):r("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.check(e.row.id)}}},[t._v("查看日志")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.resetPass(e.row.id)}}},[t._v("重置密码")]),1===e.row.flag?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("禁用")]):t._e(),0===e.row.flag?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("启用")]):t._e(),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){e.stopPropagation(),t.$jumpToFirst(t.queryForm,(function(){t.loadData(t.type)}))}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){e.stopPropagation(),t.$jumpToLast(t.queryForm,(function(){t.loadData(t.type)}))}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":function(){t.loadData(t.type)}}})],1):t._e()],1),r("el-dialog",{attrs:{title:"日志信息",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline",attrs:{inline:!0,model:t.queryForm2}},[r("el-form-item",{attrs:{label:"",prop:"pushPlat"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.queryForm2.logType,callback:function(e){t.$set(t.queryForm2,"logType",e)},expression:"queryForm2.logType"}},[r("el-option",{attrs:{label:"全部",value:""}}),r("el-option",{attrs:{label:"登录",value:"1"}}),r("el-option",{attrs:{label:"退出",value:"2"}}),r("el-option",{attrs:{label:"查看",value:"3"}}),r("el-option",{attrs:{label:"下载",value:"4"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSubmit(e)}}},[t._v("搜索")])],1)],1)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData2,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"userName",label:"操作人",width:"200"}}),r("el-table-column",{attrs:{prop:"ipAddress",label:"IP地址",width:"200"}}),r("el-table-column",{attrs:{label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.type?r("span",[t._v("登录")]):t._e(),2===e.row.type?r("span",[t._v("退出")]):t._e(),3===e.row.type?r("span",[t._v("查看")]):t._e(),4===e.row.type?r("span",[t._v("下载")]):t._e()]}}])}),r("el-table-column",{attrs:{prop:"content",label:"动作"}}),r("el-table-column",{attrs:{prop:"updateTime",label:"时间",width:"180"}})],1),t.queryForm2.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){e.stopPropagation(),t.$jumpToFirst(t.queryForm2,(function(){t.loadData(t.type,1)}))}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){e.stopPropagation(),t.$jumpToLast(t.queryForm2,(function(){t.loadData(t.type,1)}))}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm2.total,"current-page":t.queryForm2.page,"page-size":t.queryForm2.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm2,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm2,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm2,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm2,"size",e)},"current-change":function(){t.loadData(t.type,1)}}})],1):t._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"重置密码",visible:t.dialogVisiblePass,width:"40%"},on:{"update:visible":function(e){t.dialogVisiblePass=e}}},[r("el-divider"),r("set-pass",{on:{save:t.save}})],1),r("el-dialog",{attrs:{title:"新建子用户",visible:t.dialogVisibleChild,width:"30%"},on:{"update:visible":function(e){t.dialogVisibleChild=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"登录名",prop:"account"}},[r("el-input",{model:{value:t.ruleForm.account,callback:function(e){t.$set(t.ruleForm,"account",e)},expression:"ruleForm.account"}})],1),r("el-form-item",{attrs:{label:"用户姓名",prop:"username"}},[r("el-input",{model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.confirmPassword,callback:function(e){t.$set(t.ruleForm,"confirmPassword",e)},expression:"ruleForm.confirmPassword"}})],1),r("el-form-item",{attrs:{label:"单位名称",prop:"department"}},[r("el-input",{model:{value:t.ruleForm.department,callback:function(e){t.$set(t.ruleForm,"department",e)},expression:"ruleForm.department"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[r("el-input",{model:{value:t.ruleForm.address,callback:function(e){t.$set(t.ruleForm,"address",e)},expression:"ruleForm.address"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("立即创建")]),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)],1)],1)},o=[],l=r("82be"),i={components:{SetPass:l["a"]},data:function(){var t=this,e=function(e,r,a){""===r?a(new Error("请输入密码")):(""!==t.ruleForm.confirmPassword&&t.$refs.ruleForm.validateField("confirmPassword"),a())},r=function(e,r,a){""===r?a(new Error("请再次输入密码")):r!==t.ruleForm.password?a(new Error("两次输入密码不一致!")):a()};return{type:"1",info:{},queryForm:{page:1,size:10,total:"",flag:[0,1],userType:[2]},queryForm2:{logType:"",page:1,size:10,total:""},tableData:[],tableData2:[],dialogVisible:!1,dialogVisiblePass:!1,dialogVisibleChild:!1,ruleForm:{account:"",username:"",password:"",confirmPassword:"",department:"",address:"",phone:""},rules:{account:[{required:!0,message:"请输入登录名",trigger:"blur"}],username:[{required:!0,message:"请输入用户姓名",trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}],confirmPassword:[{required:!0,validator:r,trigger:"blur"}],department:[{required:!0,message:"请输入单位名称",trigger:"blur"}]},userId:""}},methods:{add:function(){this.dialogVisibleChild=!0},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var r=Object.assign({},e.ruleForm);r.password=r.confirmPassword=e.$md5(e.ruleForm.password),r.userId=e.info.id,e.httpPost("/user/child/add",r).then((function(t){e.$message.success("添加成功"),e.loadData(e.type)})).catch((function(t){})),e.dialogVisibleChild=!1}))},resetForm:function(t){this.$refs[t].resetFields()},onSubmit:function(){this.loadData(this.type,1)},check:function(t){this.userId=t,this.queryForm2.logType="",this.dialogVisible=!0,this.loadData(this.type,1)},resetPass:function(t){this.userId=t,this.dialogVisiblePass=!0},save:function(t){var e=this,r={newPassword:this.$md5(t),userId:this.userId};this.httpPost("/user/resetPassword",r).then((function(t){e.dialogVisiblePass=!1,e.$message.success("修改成功")}))},disabled:function(t,e){this.$disabledFn(this,t,e)},del:function(t){this.$delData(this,t)},loadData:function(t,e){var r=this;if(e){this.queryForm2.total="";var a=Object.assign({},this.queryForm2);a.userType=1,a.userId=this.userId,this.httpGet("/log/user/query",a).then((function(t){r.tableData2=t.rows,r.queryForm2.total=t.total}))}else{this.queryForm.total="";var o=Object.assign({},this.queryForm);o.userType=[3],o.keyUser=this.info.id,this.httpPost("/user/query",o).then((function(t){r.tableData=t.rows,r.queryForm.total=t.total}))}}},mounted:function(){this.type=this.$sessionData("get","type"),this.info=this.$sessionData("get","childInfo"),this.loadData(this.type)}},n=i,s=(r("3954"),r("9ca4")),u=Object(s["a"])(n,a,o,!1,null,"3b463214",null);e["default"]=u.exports},3765:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("注册用户管理")])],1)],1),r("el-card",[r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline form_border",attrs:{inline:!0,model:t.queryForm}},[r("el-form-item",{attrs:{label:"登录名",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.account,callback:function(e){t.$set(t.queryForm,"account",e)},expression:"queryForm.account"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.userName,callback:function(e){t.$set(t.queryForm,"userName",e)},expression:"queryForm.userName"}})],1),r("el-form-item",{attrs:{label:"单位名",prop:"department"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.department,callback:function(e){t.$set(t.queryForm,"department",e)},expression:"queryForm.department"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSubmit(e)}}},[t._v("搜索")])],1)],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"},[r("span",{on:{click:function(e){return e.stopPropagation(),t.remove(e)}}},[t._v("批量删除")]),r("span",{on:{click:function(e){return e.stopPropagation(),t.exportData(e)}}},[t._v("导出当前数据")])])])]),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"account",label:"登录名"}}),r("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),r("el-table-column",{attrs:{prop:"department",label:"单位名称"}}),r("el-table-column",{attrs:{prop:"address",label:"单位地址"}}),r("el-table-column",{attrs:{prop:"mobile",label:"手机号码",width:"140"}}),r("el-table-column",{attrs:{prop:"email",label:"电子邮箱",width:"180"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),r("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.resetPass(e.row)}}},[t._v("重置密码")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.check(e.row)}}},[t._v("查看")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.edit(e.row)}}},[t._v("修改")]),1===e.row.flag?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("禁用")]):t._e(),0===e.row.flag?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("启用")]):t._e(),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1),r("el-dialog",{attrs:{title:1==t.type?"查看":"修改",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[r("el-input",{attrs:{disabled:""},model:{value:t.ruleForm.createTime,callback:function(e){t.$set(t.ruleForm,"createTime",e)},expression:"ruleForm.createTime"}})],1),r("el-form-item",{attrs:{label:"登录名",prop:"account"}},[r("el-input",{attrs:{disabled:""},model:{value:t.ruleForm.account,callback:function(e){t.$set(t.ruleForm,"account",e)},expression:"ruleForm.account"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{attrs:{disabled:1===t.type},model:{value:t.ruleForm.userName,callback:function(e){t.$set(t.ruleForm,"userName",e)},expression:"ruleForm.userName"}})],1),r("el-form-item",{attrs:{label:"单位名称",prop:"department"}},[r("el-input",{attrs:{disabled:1===t.type},model:{value:t.ruleForm.department,callback:function(e){t.$set(t.ruleForm,"department",e)},expression:"ruleForm.department"}})],1),r("el-form-item",{attrs:{label:"单位地址",prop:"address"}},[r("el-input",{attrs:{disabled:1===t.type},model:{value:t.ruleForm.address,callback:function(e){t.$set(t.ruleForm,"address",e)},expression:"ruleForm.address"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{attrs:{disabled:1===t.type},model:{value:t.ruleForm.mobile,callback:function(e){t.$set(t.ruleForm,"mobile",e)},expression:"ruleForm.mobile"}})],1),r("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[r("el-input",{attrs:{disabled:1===t.type},model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{disabled:1===t.type,type:"textarea"},model:{value:t.ruleForm.memo,callback:function(e){t.$set(t.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"重置密码",visible:t.dialogVisiblePass,width:"40%"},on:{"update:visible":function(e){t.dialogVisiblePass=e}}},[r("el-divider"),r("set-pass",{on:{save:t.save}})],1)],1)],1)},o=[],l=(r("9302"),r("2eeb"),r("fe8a"),r("82be")),i={components:{SetPass:l["a"]},data:function(){return{queryForm:{department:"",account:"",userName:"",page:1,size:10,total:"",flag:[0,1],userType:[5]},tableData:[],multipleSelection:[],dialogVisible:!1,ruleForm:{},userId:"",type:1,rules:{childUser:[{required:!0,message:"请输入子用户个数",trigger:"blur"}],downLimit:[{required:!0,message:"请输入限制下载文件个数",trigger:"blur"}]},dialogVisiblePass:!1}},methods:{onSubmit:function(){this.loadData()},remove:function(){var t=this;if(!this.multipleSelection.length)return this.$message.warning("请选择要删除的数据！");this.$confirm("此操作将删除已选中数据, 是否继续?","提示",{type:"warning"}).then((function(){var e=[];t.multipleSelection.map((function(t){return e.push(t.id)})),t.httpPost("/role/rem",e).then((function(e){t.$message({type:"success",message:"删除成功!"})}))})).catch((function(){}))},handleSelectionChange:function(t){this.multipleSelection=t},resetPass:function(t){this.userId=t,this.dialogVisiblePass=!0},save:function(t){var e=this,r={newPassword:this.$md5(t),userId:this.userId};this.httpPost("/user/resetPassword",r).then((function(t){e.dialogVisiblePass=!1,e.$message.success("修改成功")}))},check:function(t){this.type=1,this.dialogVisible=!0,this.ruleForm=Object.assign({},t)},edit:function(t){this.type=2,this.dialogVisible=!0,this.ruleForm=Object.assign({},t)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;2===e.type&&e.httpPost("/user/registerUser/update/"+e.ruleForm.id,e.ruleForm).then((function(t){e.$message.success("修改成功"),e.loadData()})),e.dialogVisible=!1}))},update:function(t){var e=this;this.$confirm("是否确认此操作?","提示",{type:"warning"}).then((function(){e.$message({type:"success",message:"操作成功!"})})).catch((function(){}))},del:function(t){this.$delData(this,t)},disabled:function(t,e){this.$disabledFn(this,t,e)},exportData:function(){var t=Object.assign({},this.queryForm),e=Object.keys(t).map((function(e){return e+"="+t[e]}));window.open(this.$baseRequestUrl+"/user/registerUser/export?"+e.join("&"))},loadData:function(){var t=this;this.queryForm.total="",this.httpPost("/user/query",this.queryForm).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total}))}},mounted:function(){this.loadData()}},n=i,s=r("9ca4"),u=Object(s["a"])(n,a,o,!1,null,"7013f038",null);e["default"]=u.exports},3842:function(t,e,r){},3954:function(t,e,r){"use strict";var a=r("4d28"),o=r.n(a);o.a},"39ba":function(t,e,r){"use strict";var a=r("3bb5"),o=r.n(a);o.a},"3bb5":function(t,e,r){},4232:function(t,e,r){"use strict";var a=r("7570"),o=r.n(a);o.a},"4d28":function(t,e,r){},"4f58":function(t,e,r){},"51ca":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("定制用户管理")])],1)],1),r("el-card",[r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline form_border",attrs:{inline:!0,model:t.queryForm}},[r("el-form-item",{attrs:{label:"组织机构代码",prop:"userCode"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.userCode,callback:function(e){t.$set(t.queryForm,"userCode",e)},expression:"queryForm.userCode"}})],1),r("el-form-item",{attrs:{label:"组织机构名称",prop:"department"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.department,callback:function(e){t.$set(t.queryForm,"department",e)},expression:"queryForm.department"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSubmit(e)}}},[t._v("搜索")])],1)],1)],1),r("div",{staticClass:"MT_table_cont"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"userCode",label:"机构代码",width:"200"}}),r("el-table-column",{attrs:{prop:"department",label:"机构名称"}}),r("el-table-column",{attrs:{prop:"deptType",label:"机构类型",width:"140"}}),r("el-table-column",{attrs:{prop:"legalPerson",label:"机构法人",width:"140"}}),r("el-table-column",{attrs:{prop:"address",label:"机构地址"}}),r("el-table-column",{attrs:{label:"子用户限制",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticClass:"choose_btn _color",staticStyle:{cursor:"pointer"},attrs:{onmouseover:"this.style.fontWeight='bold'",onmouseout:"this.style.fontWeight='normal'"},on:{click:function(r){return t.childNum(e.row)}}},[t._v(" "+t._s(e.row.childNumber)+" ")])]}}])}),r("el-table-column",{attrs:{label:"下载限制",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticClass:"choose_btn _color",staticStyle:{cursor:"pointer"},attrs:{onmouseover:"this.style.fontWeight='bold'",onmouseout:"this.style.fontWeight='normal'"},on:{click:function(r){return t.downloadLimit(e.row)}}},[t._v(" "+t._s(e.row.downloadLimit)+" ")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.check(e.row)}}},[t._v("查看子用户")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.colloction(e.row)}}},[t._v("查看托管")]),1===e.row.flag?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("禁用")]):t._e(),0===e.row.flag?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("启用")]):t._e(),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1),r("el-dialog",{attrs:{title:t.label+"修改",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},["子用户"===t.label?r("el-form-item",{attrs:{label:"子用户个数",prop:"childNumber"}},[r("el-input",{model:{value:t.ruleForm.childNumber,callback:function(e){t.$set(t.ruleForm,"childNumber",e)},expression:"ruleForm.childNumber"}})],1):r("el-form-item",{attrs:{label:"下载文件个数",prop:"downloadLimit"}},[r("el-input",{model:{value:t.ruleForm.downloadLimit,callback:function(e){t.$set(t.ruleForm,"downloadLimit",e)},expression:"ruleForm.downloadLimit"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)],1)},o=[],l={data:function(){return{queryForm:{department:"",userCode:"",page:1,size:10,total:"",flag:[0,1],userType:[4]},tableData:[],dialogVisible:!1,ruleForm:{childNumber:"",downloadLimit:""},label:"",activeId:"",rules:{childNumber:[{required:!0,message:"请输入子用户个数",trigger:"blur"}],downloadLimit:[{required:!0,message:"请输入限制下载文件个数",trigger:"blur"}]}}},methods:{onSubmit:function(){this.loadData()},check:function(t){this.$router.push({path:"/childUser",name:"ChildUser",params:{info:t,type:2}}),this.$sessionData("set","type",2),this.$sessionData("set","childInfo",t)},childNum:function(t){this.activeId=t.id,this.ruleForm.childNumber=t.childNumber,this.label="子用户",this.dialogVisible=!0},downloadLimit:function(t){this.activeId=t.id,this.label="下载个数",this.ruleForm.downloadLimit=t.downloadLimit,this.dialogVisible=!0},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;if("子用户"===e.label){var r={childNumber:e.ruleForm.childNumber,userId:e.activeId};e.httpPost("/user/childNumber/update",r).then((function(t){e.loadData()})).catch((function(t){}))}else{r={downloadLimit:e.ruleForm.downloadLimit,userId:e.activeId};e.httpPost("/user/downloadLimit/update",r).then((function(t){e.loadData()})).catch((function(t){}))}e.dialogVisible=!1}))},colloction:function(t){this.$router.push({path:"/colloction",name:"Colloction",params:{info:t}})},del:function(t){this.$delData(this,t)},disabled:function(t,e){this.$disabledFn(this,t,e)},loadData:function(){var t=this;this.queryForm.total="",this.httpPost("/user/query",this.queryForm).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total}))}},mounted:function(){this.loadData()}},i=l,n=(r("4232"),r("9ca4")),s=Object(n["a"])(i,a,o,!1,null,"7ffa86fa",null);e["default"]=s.exports},"5fc2":function(t,e,r){},"650c":function(t,e,r){},7570:function(t,e,r){},"77ad":function(t,e,r){"use strict";var a=r("1c8b"),o=r("a719"),l=r("74e7"),i=r("e1d6"),n=r("d88d"),s=r("da10"),u=r("1bbd"),c=r("90fb"),d=r("1ea7"),m=r("ff9c"),p=d("slice"),f=m("slice",{ACCESSORS:!0,0:0,1:2}),b=c("species"),h=[].slice,g=Math.max;a({target:"Array",proto:!0,forced:!p||!f},{slice:function(t,e){var r,a,c,d=s(this),m=n(d.length),p=i(t,m),f=i(void 0===e?m:e,m);if(l(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!l(r.prototype)?o(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return h.call(d,p,f);for(a=new(void 0===r?Array:r)(g(f-p,0)),c=0;p<f;p++,c++)p in d&&u(a,c,d[p]);return a.length=c,a}})},"82be":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{required:"",label:"旧密码",prop:"oldPass"}},[r("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.oldPass,callback:function(e){t.$set(t.ruleForm,"oldPass",e)},expression:"ruleForm.oldPass"}})],1),r("el-form-item",{attrs:{required:"",label:"新密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),r("el-form-item",{attrs:{required:"",label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")]),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)},o=[],l=(r("e35a"),r("5e9f"),{data:function(){var t=this,e=function(t,e,r){if(!e)return r(new Error("请输入旧密码"));r()},r=function(e,r,a){""===r?a(new Error("请输入密码")):(""!==t.ruleForm.checkPass&&t.$refs.ruleForm.validateField("checkPass"),a())},a=function(e,r,a){""===r?a(new Error("请再次输入密码")):r!==t.ruleForm.pass?a(new Error("两次输入密码不一致!")):a()};return{ruleForm:{oldPass:"",pass:"",checkPass:""},rules:{oldPass:[{validator:e,trigger:"blur"}],pass:[{validator:r,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var r={oldPassword:e.$md5(e.ruleForm.oldPass),newPassword:e.$md5(e.ruleForm.pass),reNewPassword:e.$md5(e.ruleForm.checkPass)};e.httpPost("/user/modPassword",r).then((function(t){e.$message.success("修改成功,请重新登录！"),e.httpPost("/user/logout",{}).then((function(t){})),e.$sessionData("remove","USER"),e.$router.replace("/login")}))}))},resetForm:function(t){this.$refs[t].resetFields()}}}),i=l,n=(r("9467"),r("9ca4")),s=Object(n["a"])(i,a,o,!1,null,"2b3f0075",null);e["a"]=s.exports},8365:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("短信用户提醒")])],1)],1),r("el-card",[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"短信内容",prop:"desc"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.ruleForm.desc,callback:function(e){t.$set(t.ruleForm,"desc",e)},expression:"ruleForm.desc"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save("ruleForm")}}},[t._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("发送短信")]),r("el-button",{on:{click:t.downAddrList}},[t._v("下载通讯录")])],1)],1)],1)],1)},o=[],l={data:function(){return{ruleForm:{desc:""},rules:{desc:[{required:!0,message:"请填写短信内容",trigger:"blur"}]}}},methods:{save:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.httpGet("/sms/save",{smsContent:e.ruleForm.desc}).then((function(t){e.$message.success("保存成功")}))}))},submitForm:function(t){this.$refs[t].validate((function(t){if(!t)return!1}))},resetForm:function(t){this.$refs[t].resetFields()},downAddrList:function(){var t="/sms/userList/export";window.open(this.$baseRequestUrl+t)},loadData:function(){var t=this;this.httpGet("/globalConfig/query",{}).then((function(e){t.ruleForm.desc=e.smsContent}))}},mounted:function(){this.loadData()}},i=l,n=(r("289d"),r("9ca4")),s=Object(n["a"])(i,a,o,!1,null,"7411e5fd",null);e["default"]=s.exports},"861e":function(t,e,r){},"89bb":function(t,e,r){"use strict";var a=r("650c"),o=r.n(a);o.a},"8a1c":function(t,e,r){var a=r("a719"),o=r("2118"),l=r("90fb"),i=l("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},"8cf1":function(t,e,r){},9302:function(t,e,r){"use strict";var a=r("1c8b"),o=r("692f"),l=r("da10"),i=r("d7e1"),n=[].join,s=o!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:s||!u},{join:function(t){return n.call(l(this),void 0===t?",":t)}})},9467:function(t,e,r){"use strict";var a=r("861e"),o=r.n(a);o.a},"9d82":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("用户联系信息")])],1)],1),r("el-card",[r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline form_border",attrs:{inline:!0,model:t.queryForm}},[r("el-form-item",{attrs:{label:"组织机构名称",prop:"department"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.department,callback:function(e){t.$set(t.queryForm,"department",e)},expression:"queryForm.department"}})],1),r("el-form-item",{attrs:{label:"组织机构代码",prop:"userCode"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.userCode,callback:function(e){t.$set(t.queryForm,"userCode",e)},expression:"queryForm.userCode"}})],1),r("el-form-item",{attrs:{label:"登录名",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.account,callback:function(e){t.$set(t.queryForm,"account",e)},expression:"queryForm.account"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSubmit(e)}}},[t._v("搜索")])],1)],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"},[r("span",{on:{click:function(e){return e.stopPropagation(),t.exportData(e)}}},[t._v("导出当前数据")])])])]),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"account",label:"登录名",width:"180"}}),r("el-table-column",{attrs:{prop:"userCode",label:"组织机构代码",width:"180"}}),r("el-table-column",{attrs:{prop:"department",label:"机构名称"}}),r("el-table-column",{attrs:{label:"用户类型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.userType?r("span",[t._v("管理员")]):t._e(),1==e.row.userType?r("span",[t._v("普通用户，2")]):t._e(),2==e.row.userType?r("span",[t._v("Key用户")]):t._e(),4==e.row.userType?r("span",[t._v("定制用户")]):t._e(),5==e.row.userType?r("span",[t._v("注册用户")]):t._e()]}}])}),r("el-table-column",{attrs:{prop:"extName",label:"真实姓名",width:"180"}}),r("el-table-column",{attrs:{prop:"extContract",label:"联系方式",width:"140"}}),r("el-table-column",{attrs:{prop:"extEmail",label:"电子邮箱",width:"180"}}),r("el-table-column",{attrs:{prop:"extUpdateTime",label:"创建时间",width:"180"}})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1)])],1)},o=[],l=(r("9302"),r("2eeb"),r("fe8a"),{data:function(){return{queryForm:{department:"",userCode:"",account:"",page:1,size:10,total:""},tableData:[]}},methods:{onSubmit:function(){this.loadData()},exportData:function(){var t=Object.assign({},this.queryForm),e=Object.keys(t).map((function(e){return e+"="+t[e]}));window.open(this.$baseRequestUrl+"/user/registerUser/export?"+e.join("&"))},loadData:function(){var t=this;this.queryForm.total="",this.httpGet("/user/contact/query",this.queryForm).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total}))}},mounted:function(){this.loadData()}}),i=l,n=r("9ca4"),s=Object(n["a"])(i,a,o,!1,null,"570ce11b",null);e["default"]=s.exports},"9fc3":function(t,e,r){"use strict";var a=r("5fc2"),o=r.n(a);o.a},ad9f:function(t,e,r){"use strict";var a=r("8cf1"),o=r.n(a);o.a},b4fb:function(t,e,r){"use strict";var a=r("1c8b"),o=r("efe2"),l=r("74e7"),i=r("a719"),n=r("3553"),s=r("d88d"),u=r("1bbd"),c=r("1ca1"),d=r("1ea7"),m=r("90fb"),p=r("f594"),f=m("isConcatSpreadable"),b=9007199254740991,h="Maximum allowed index exceeded",g=p>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=d("concat"),v=function(t){if(!i(t))return!1;var e=t[f];return void 0!==e?!!e:l(t)},F=!g||!y;a({target:"Array",proto:!0,forced:F},{concat:function(t){var e,r,a,o,l,i=n(this),d=c(i,0),m=0;for(e=-1,a=arguments.length;e<a;e++)if(l=-1===e?i:arguments[e],v(l)){if(o=s(l.length),m+o>b)throw TypeError(h);for(r=0;r<o;r++,m++)r in l&&u(d,m,l[r])}else{if(m>=b)throw TypeError(h);u(d,m++,l)}return d.length=m,d}})},b9e3:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("管理员管理")])],1)],1),r("el-card",[r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),t.add(e)}}},[t._v("新增")])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"rownum_",label:"编号",width:"100"}}),r("el-table-column",{attrs:{prop:"account",label:"登录名"}}),r("el-table-column",{attrs:{prop:"userName",label:"管理员姓名"}}),r("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",[t._v(t._s(e.row.roleNameList))])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.resetPass(e.row.id)}}},[t._v("重置密码")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.edit(e.row)}}},[t._v("修改")]),1===e.row.flag?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("禁用")]):t._e(),0===e.row.flag?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("启用")]):t._e(),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1),r("el-dialog",{attrs:{title:1===t.type?"新增管理员":"修改管理员",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"登录名",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入登录名"},model:{value:t.ruleForm.account,callback:function(e){t.$set(t.ruleForm,"account",e)},expression:"ruleForm.account"}})],1),r("el-form-item",{attrs:{label:"管理员姓名",prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入管理员姓名"},model:{value:t.ruleForm.userName,callback:function(e){t.$set(t.ruleForm,"userName",e)},expression:"ruleForm.userName"}})],1),1===t.type?r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1):t._e(),r("el-form-item",{attrs:{label:"角色",prop:"roleIdList"}},[r("el-radio-group",{model:{value:t.ruleForm.roleIdList,callback:function(e){t.$set(t.ruleForm,"roleIdList",e)},expression:"ruleForm.roleIdList"}},t._l(t.roleList,(function(e,a){return r("el-radio",{key:a,attrs:{label:e.id+""}},[t._v(" "+t._s(e.roleName))])})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"重置密码",visible:t.dialogVisiblePass,width:"40%"},on:{"update:visible":function(e){t.dialogVisiblePass=e}}},[r("el-divider"),r("set-pass",{on:{save:t.save}})],1)],1)],1)},o=[],l=r("82be"),i={components:{SetPass:l["a"]},data:function(){return{queryForm:{page:1,size:10,total:"",flag:[0,1],userType:[0]},tableData:[],dialogVisible:!1,ruleForm:{account:"",userName:"",password:"",roleIdList:""},userId:"",rules:{account:[{required:!0,message:"请输入登录名",trigger:"blur"}],userName:[{required:!0,message:"请输入管理员姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleIdList:[{required:!0,message:"请选择角色",trigger:"blur"}]},isDisabled:!1,isAdmin:!1,dialogVisiblePass:!1,roleList:[],type:1}},methods:{add:function(){var t=this;this.type=1,this.dialogVisible=!0,this.$nextTick((function(){t.$refs.ruleForm.resetFields(),t.ruleForm.password=""}))},onSubmit:function(){},resetPass:function(t){this.userId=t,this.dialogVisiblePass=!0},save:function(t){var e=this,r={newPassword:this.$md5(t),userId:this.userId};this.httpPost("/user/resetPassword",r).then((function(t){e.dialogVisiblePass=!1,e.$message.success("修改成功")}))},edit:function(t){var e=this;this.type=2,this.dialogVisible=!0,this.$nextTick((function(){e.$refs.ruleForm.resetFields(),e.ruleForm={account:t.account,userName:t.userName,password:t.password,roleIdList:t.roleIdList,id:t.id}}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.ruleForm.password=e.$md5(e.ruleForm.password);var r=Object.assign({},e.ruleForm);r.roleIdList=[e.ruleForm.roleIdList],1===e.type?e.httpPost("/user/admin/add",r).then((function(t){e.$message({type:"success",message:"添加成功!"}),e.loadData()})).catch((function(t){})):e.httpPost("/user/admin/update/"+r.id,r).then((function(t){e.$message({type:"success",message:"修改成功!"}),e.loadData()})).catch((function(t){})),e.dialogVisible=!1}))},colloction:function(t){this.$router.push({path:"/colloction",name:"Colloction",params:{info:t}})},del:function(t){this.$delData(this,t)},disabled:function(t,e){this.$disabledFn(this,t,e)},loadData:function(){var t=this;this.queryForm.total="",this.httpPost("/user/query",this.queryForm).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total})),this.httpGet("/role/query",{}).then((function(e){t.roleList=e.rows}))}},mounted:function(){this.loadData()}},n=i,s=(r("ad9f"),r("9ca4")),u=Object(s["a"])(n,a,o,!1,null,"31bb4fd2",null);e["default"]=u.exports},d1b8:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("组织机构管理")])],1)],1),r("el-card",[r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline form_border",attrs:{inline:!0,model:t.queryForm}},[r("el-form-item",{attrs:{label:"组织机构代码",prop:"userCode"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.userCode,callback:function(e){t.$set(t.queryForm,"userCode",e)},expression:"queryForm.userCode"}})],1),r("el-form-item",{attrs:{label:"组织机构名称",prop:"department"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.department,callback:function(e){t.$set(t.queryForm,"department",e)},expression:"queryForm.department"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSubmit(e)}}},[t._v("搜索")])],1)],1)],1),r("div",{staticClass:"MT_table_cont"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"userCode",label:"机构代码",width:"200"}}),r("el-table-column",{attrs:{prop:"department",label:"机构名称"}}),r("el-table-column",{attrs:{prop:"deptType",label:"机构类型",width:"140"}}),r("el-table-column",{attrs:{prop:"legalPerson",label:"机构法人",width:"140"}}),r("el-table-column",{attrs:{prop:"address",label:"机构地址"}}),r("el-table-column",{attrs:{label:"子用户限制",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticClass:"choose_btn _color",staticStyle:{cursor:"pointer"},attrs:{onmouseover:"this.style.fontWeight='bold'",onmouseout:"this.style.fontWeight='normal'"},on:{click:function(r){return t.childNum(e.row)}}},[t._v(" "+t._s(e.row.childNumber)+" ")])]}}])}),r("el-table-column",{attrs:{label:"下载限制",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticClass:"choose_btn _color",staticStyle:{cursor:"pointer"},attrs:{onmouseover:"this.style.fontWeight='bold'",onmouseout:"this.style.fontWeight='normal'"},on:{click:function(r){return t.downloadLimit(e.row)}}},[t._v(" "+t._s(e.row.downloadLimit)+" ")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.check(e.row)}}},[t._v("查看子用户")]),r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.update(e.row.id)}}},[t._v("升级")]),1===e.row.flag?r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("禁用")]):t._e(),0===e.row.flag?r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.disabled(e.row.id,e.row.flag)}}},[t._v("启用")]):t._e(),r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1),r("el-dialog",{attrs:{title:t.label+"修改",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},["子用户"===t.label?r("el-form-item",{attrs:{label:"子用户个数",prop:"childNumber"}},[r("el-input",{model:{value:t.ruleForm.childNumber,callback:function(e){t.$set(t.ruleForm,"childNumber",e)},expression:"ruleForm.childNumber"}})],1):r("el-form-item",{attrs:{label:"下载文件个数",prop:"downloadLimit"}},[r("el-input",{model:{value:t.ruleForm.downloadLimit,callback:function(e){t.$set(t.ruleForm,"downloadLimit",e)},expression:"ruleForm.downloadLimit"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)],1)},o=[],l={data:function(){return{queryForm:{department:"",userCode:"",page:1,size:10,total:"",flag:[0,1],userType:[2]},tableData:[],dialogVisible:!1,ruleForm:{childNumber:"",downloadLimit:""},label:"",activeId:"",rules:{childNumber:[{required:!0,message:"请输入子用户个数",trigger:"blur"}],downloadLimit:[{required:!0,message:"请输入限制下载文件个数",trigger:"blur"}]}}},methods:{onSubmit:function(){this.loadData()},check:function(t){this.$router.push({path:"/childUser",name:"ChildUser",params:{info:t,type:1}}),this.$sessionData("set","type",1),this.$sessionData("set","childInfo",t)},childNum:function(t){this.activeId=t.id,this.ruleForm.childNumber=t.childNumber,this.label="子用户",this.dialogVisible=!0},downloadLimit:function(t){this.activeId=t.id,this.label="下载个数",this.ruleForm.downloadLimit=t.downloadLimit,this.dialogVisible=!0},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;if("子用户"===e.label){var r={childNumber:e.ruleForm.childNumber,userId:e.activeId};e.httpPost("/user/childNumber/update",r).then((function(t){e.loadData()})).catch((function(t){}))}else{r={downloadLimit:e.ruleForm.downloadLimit,userId:e.activeId};e.httpPost("/user/downloadLimit/update",r).then((function(t){e.loadData()})).catch((function(t){}))}e.dialogVisible=!1}))},update:function(t){var e=this;this.$confirm("是否确认升级操作?","提示",{type:"warning"}).then((function(){e.httpPost("/user/userType/update/"+t,{}).then((function(t){e.loadData(),e.$message({type:"success",message:"升级成功!"})})).catch((function(t){}))})).catch((function(){}))},del:function(t){this.$delData(this,t)},disabled:function(t,e){this.$disabledFn(this,t,e)},loadData:function(){var t=this;this.queryForm.total="",this.httpPost("/user/query",this.queryForm).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total}))}},mounted:function(){this.loadData()}},i=l,n=(r("39ba"),r("9ca4")),s=Object(n["a"])(i,a,o,!1,null,"abf8b1a2",null);e["default"]=s.exports},e2e9:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/customUser"}}},[t._v("定制用户管理")]),r("el-breadcrumb-item",[t._v("托管")])],1)],1),r("el-card",[r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline form_border",attrs:{inline:!0,model:t.queryForm}},[r("el-form-item",{attrs:{label:"标准编号",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入标准编号搜索"},model:{value:t.queryForm.code,callback:function(e){t.$set(t.queryForm,"code",e)},expression:"queryForm.code"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSubmit(e)}}},[t._v("搜索")])],1)],1)],1),r("div",{staticClass:"MT_table_cont"},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){e.stopPropagation(),t.dialogVisible=!0}}},[t._v("录入")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(e){return e.stopPropagation(),t.downModule(e)}}},[t._v("模板下载")]),r("el-upload",{staticClass:"upload-demo",attrs:{accept:".xlsx,.xls",action:t.uploadAction(),"on-success":t.uploadSuccess,beforeUpload:t.beforeExcelUpload}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[r("i",{staticClass:"el-icon-upload2"}),t._v(" 导入")])]),r("div",{staticClass:"btn_cont"},[r("div",{staticClass:"choose_btn _color"},[r("span",{on:{click:function(e){return e.stopPropagation(),t.remove(e)}}},[t._v("批量删除")])])])],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"rownum_",label:"序号",width:"100"}}),r("el-table-column",{attrs:{prop:"code",label:"标准编号",width:"200"}}),r("el-table-column",{attrs:{prop:"csName",label:"标准名称"}}),r("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["A"===e.row.status?r("el-tag",[t._v("现行")]):r("el-tag",{attrs:{type:"danger"}},[t._v("作废")])]}}])}),r("el-table-column",{attrs:{prop:"replacedSd",label:"被替代的标准"}}),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"danger"},on:{click:function(r){return r.stopPropagation(),t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){return e.stopPropagation(),t.$jumpToFirst(t.queryForm,t.loadData)}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){return e.stopPropagation(),t.$jumpToLast(t.queryForm,t.loadData)}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e()],1),r("el-dialog",{attrs:{title:"新建录入",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"标准编号",prop:"code"}},[r("el-input",{model:{value:t.ruleForm.code,callback:function(e){t.$set(t.ruleForm,"code",e)},expression:"ruleForm.code"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("录入")]),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)],1)],1)},o=[],l=(r("e35a"),r("5e9f"),{data:function(){return{queryForm:{code:"",page:1,size:10,total:""},tableData:[],multipleSelection:[],dialogVisible:!1,ruleForm:{code:""},rules:{code:[{required:!0,message:"请输入标准编号",trigger:"blur"}]},info:{}}},methods:{uploadAction:function(){return this.$ExcelUpload},uploadSuccess:function(t,e,r){this.import(t.data.fileUrl)},import:function(t){var e=this,r={userId:this.info.id,fileUrl:t};this.httpPost("/standard/managed/user/import",r).then((function(t){t.hasManagedStandard&&t.unFindStandard?e.$message({showClose:!0,type:"warning",message:"标准号为"+t.hasManagedStandard+"的标准已存在 \n标准号为"+t.unFindStandard+"的标准不存在",duration:0}):t.hasManagedStandard&&!t.unFindStandard?e.$message({showClose:!0,type:"warning",message:"标准号为"+t.hasManagedStandard+"的标准已存在 \n",duration:0}):!t.hasManagedStandard&&t.unFindStandard&&e.$message({showClose:!0,type:"warning",message:"标准号为"+t.unFindStandard+"的标准不存在",duration:0})})),loadData()},beforeExcelUpload:function(t){var e=t.size/1024/1024<100;return e||this.$message({message:"上传文件大小不能超过 100MB!",type:"warning"}),e},downModule:function(){window.open(this.$templateDownloadUrl+"TEMPLATE1")},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var r=Object.assign({},e.ruleForm);r.userId=e.info.id,e.httpPost("/standard/managed/user/add",r).then((function(t){e.$message({type:"success",message:"录入成功!"})})).catch((function(){}))}))},resetForm:function(t){this.$refs[t].resetFields()},del:function(t){var e=this;this.$confirm("此操作将删除数据, 是否继续?","提示",{type:"warning"}).then((function(){var r={standardIdList:[t],userId:e.info.id};e.httpPost("/standard/managed/user/rem",r).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.$emit("loadDate")}))})).catch((function(){}))},remove:function(){var t=this;if(!this.multipleSelection.length)return this.$message.warning("请选择要删除的数据！");this.$confirm("此操作将删除已选中数据, 是否继续?","提示",{type:"warning"}).then((function(){for(var e=[],r=0;r<t.multipleSelection.length;r++)e.push(t.multipleSelection[r].id);var a={standardIdList:e,userId:t.info.id};t.httpPost("/standard/managed/user/rem",a).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.$emit("loadDate")}))})).catch((function(){}))},handleSelectionChange:function(t){this.multipleSelection=t},onSubmit:function(){this.loadData()},loadData:function(){var t=this;this.queryForm.total="";var e=Object.assign({},this.queryForm);e.userId=this.info.id,this.httpGet("/standard/managed/user/query",e).then((function(e){t.tableData=e.rows,t.queryForm.total=e.total}))}},mounted:function(){var t=this.$route.params;t.info?(this.info=t.info,this.loadData()):this.$router.replace("/customUser")}}),i=l,n=(r("26b5"),r("9ca4")),s=Object(n["a"])(i,a,o,!1,null,"e4171b2e",null);e["default"]=s.exports},fe0fc:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{staticClass:"breadcrumb_item",attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("用户管理")]),r("el-breadcrumb-item",[t._v("下载控制")])],1)],1),r("el-card",[r("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"总体控制",name:"0"}},[r("switch-item",{attrs:{flag:t.activeName}})],1),r("el-tab-pane",{attrs:{label:"用户控制",name:"1"}},[r("switch-item",{attrs:{flag:t.activeName}})],1)],1)],1)],1)},o=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["0"===t.flag?r("el-form",{ref:"form",staticClass:"row_form",attrs:{model:t.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"全部标准"}},[r("el-switch",{on:{change:t.allChange},model:{value:t.form.type0,callback:function(e){t.$set(t.form,"type0",e)},expression:"form.type0"}})],1),r("el-form-item",{attrs:{label:"国家标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type1,callback:function(e){t.$set(t.form,"type1",e)},expression:"form.type1"}})],1),r("el-form-item",{attrs:{label:"行业标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type2,callback:function(e){t.$set(t.form,"type2",e)},expression:"form.type2"}})],1),r("el-form-item",{attrs:{label:"地方标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type3,callback:function(e){t.$set(t.form,"type3",e)},expression:"form.type3"}})],1),r("el-form-item",{attrs:{label:"国际标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type4,callback:function(e){t.$set(t.form,"type4",e)},expression:"form.type4"}})],1),r("el-form-item",{attrs:{label:"欧盟法规指令"}},[r("el-switch",{model:{value:t.form.type5,callback:function(e){t.$set(t.form,"type5",e)},expression:"form.type5"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(1)}}},[t._v("确定")])],1)],1):r("div",[r("div",{staticClass:"MT_fn_btn"},[r("el-form",{staticClass:"btn_right demo-form-inline",attrs:{inline:!0,model:t.queryForm}},[r("el-form-item",{attrs:{label:"组织机构代码",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.account,callback:function(e){t.$set(t.queryForm,"account",e)},expression:"queryForm.account"}})],1),r("el-form-item",{attrs:{label:"组织机构名称",prop:"department"}},[r("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:t.queryForm.department,callback:function(e){t.$set(t.queryForm,"department",e)},expression:"queryForm.department"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onSearch(e)}}},[t._v("搜索")])],1)],1)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"rownum_",label:"序号",width:"100"}}),r("el-table-column",{attrs:{prop:"department",label:"组织机构名称"}}),r("el-table-column",{attrs:{prop:"type0",label:"全部标准",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type0?r("el-tag",[t._v("开启")]):r("el-tag",{attrs:{type:"danger"}},[t._v("关闭")])]}}])}),r("el-table-column",{attrs:{prop:"type1",label:"国家标准",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type1?r("el-tag",[t._v("开启")]):r("el-tag",{attrs:{type:"danger"}},[t._v("关闭")])]}}])}),r("el-table-column",{attrs:{prop:"type2",label:"行业标准",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type2?r("el-tag",[t._v("开启")]):r("el-tag",{attrs:{type:"danger"}},[t._v("关闭")])]}}])}),r("el-table-column",{attrs:{prop:"type3",label:"地方标准",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type3?r("el-tag",[t._v("开启")]):r("el-tag",{attrs:{type:"danger"}},[t._v("关闭")])]}}])}),r("el-table-column",{attrs:{prop:"type4",label:"国际标准",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type4?r("el-tag",[t._v("开启")]):r("el-tag",{attrs:{type:"danger"}},[t._v("关闭")])]}}])}),r("el-table-column",{attrs:{prop:"type5",label:"欧盟法规法令",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type5?r("el-tag",[t._v("开启")]):r("el-tag",{attrs:{type:"danger"}},[t._v("关闭")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(r){return r.stopPropagation(),t.edit(e.row)}}},[t._v("修改")])]}}])})],1),t.queryForm.total?r("div",{staticClass:"MT_pagination"},[r("span",{staticClass:"jump_first",on:{click:function(e){e.stopPropagation(),t.$jumpToFirst(t.queryForm,(function(){t.loadData(1,t.count)}))}}},[t._v("首页")]),r("span",{staticClass:"jump_last",on:{click:function(e){e.stopPropagation(),t.$jumpToLast(t.queryForm,(function(){t.loadData(1,t.count)}))}}},[t._v("尾页")]),r("el-pagination",{attrs:{background:"",total:t.queryForm.total,"current-page":t.queryForm.page,"page-size":t.queryForm.size,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.queryForm,"page",e)},"update:current-page":function(e){return t.$set(t.queryForm,"page",e)},"update:pageSize":function(e){return t.$set(t.queryForm,"size",e)},"update:page-size":function(e){return t.$set(t.queryForm,"size",e)},"current-change":t.loadData}})],1):t._e(),r("el-dialog",{attrs:{title:"控制修改",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-divider"),r("el-form",{ref:"form",staticClass:"column",attrs:{model:t.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"全部标准"}},[r("el-switch",{on:{change:t.allChange},model:{value:t.form.type0,callback:function(e){t.$set(t.form,"type0",e)},expression:"form.type0"}})],1),r("el-form-item",{attrs:{label:"国家标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type1,callback:function(e){t.$set(t.form,"type1",e)},expression:"form.type1"}})],1),r("el-form-item",{attrs:{label:"行业标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type2,callback:function(e){t.$set(t.form,"type2",e)},expression:"form.type2"}})],1),r("el-form-item",{attrs:{label:"地方标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type3,callback:function(e){t.$set(t.form,"type3",e)},expression:"form.type3"}})],1),r("el-form-item",{attrs:{label:"国际标准"}},[r("el-switch",{on:{change:t.itemChange},model:{value:t.form.type4,callback:function(e){t.$set(t.form,"type4",e)},expression:"form.type4"}})],1),r("el-form-item",{attrs:{label:"欧盟法规指令"}},[r("el-switch",{model:{value:t.form.type5,callback:function(e){t.$set(t.form,"type5",e)},expression:"form.type5"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(0)}}},[t._v("确 定")])],1)],1)],1)],1)},i=[],n={props:["flag"],data:function(){return{queryForm:{department:"",account:"",page:1,size:10,total:""},form:{type0:0,type1:0,type2:0,type3:0,type4:0,type5:0},userId:"",tableData:[],dialogVisible:!1,count:1}},methods:{onSubmit:function(t){var e=this,r=this.boolean2Num(Object.assign({},this.form));r.userId=0==t?this.userId:0,this.httpPost("/downControl/update",r).then((function(t){e.$message.success("修改成功"),"0"!==e.flag&&e.loadData(1,++e.count),e.dialogVisible=!1}))},edit:function(t){this.dialogVisible=!0,this.form=this.num2Boolean({type0:t.type0,type1:t.type1,type2:t.type2,type3:t.type3,type4:t.type4,type5:t.type5}),this.userId=t.id},onSearch:function(){++this.count,this.loadData(1,this.count)},loadData:function(t,e){var r=this;if(0==t){var a=this.boolean2Num(this.form);a.userId="0"===this.flag?0:this.userId,this.httpGet("/downControl/global/query",a).then((function(t){var e=Object.assign({},t);r.form=r.num2Boolean(e)}))}else e&&1!==e&&(this.queryForm.total="",this.httpGet("/downControl/user/query",this.queryForm).then((function(t){r.tableData=t.rows,r.queryForm.total=t.total})))},itemChange:function(t){!0===this.form.type1&&!0===this.form.type2&&!0===this.form.type3&&!0===this.form.type4?this.form.type0=!0:this.form.type0=!1},allChange:function(t){t?(this.form.type1=!0,this.form.type2=!0,this.form.type3=!0,this.form.type4=!0):(this.form.type1=!1,this.form.type2=!1,this.form.type3=!1,this.form.type4=!1)},boolean2Num:function(t){for(var e in t)!0===t[e]?t[e]=1:t[e]=0;return t},num2Boolean:function(t){for(var e in t)1===t[e]?t[e]=!0:t[e]=!1;return t}},watch:{flag:function(t,e){this.loadData(t,this.count)}},mounted:function(){this.loadData(0)}},s=n,u=(r("9fc3"),r("9ca4")),c=Object(u["a"])(s,l,i,!1,null,"6d9e9c04",null),d=c.exports,m={components:{SwitchItem:d},data:function(){return{activeName:"0"}},methods:{handleClick:function(t,e){}}},p=m,f=Object(u["a"])(p,a,o,!1,null,"118c0f5b",null);e["default"]=f.exports},fe8a:function(t,e,r){var a=r("1c8b"),o=r("3553"),l=r("cbab"),i=r("efe2"),n=i((function(){l(1)}));a({target:"Object",stat:!0,forced:n},{keys:function(t){return l(o(t))}})}}]);
//# sourceMappingURL=user.6d251880.js.map